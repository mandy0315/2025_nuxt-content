import{u as r,q as g,s as p}from"./C_-Ao5nl.js";const C=()=>{const a=r("loading",()=>!1),o=r("posts",()=>({list:[],totalPosts:0})),c=t=>{if(["desc","asc"].includes(t))return t.toUpperCase();p({statusCode:404,statusMessage:"Page Not Found"})},n=async(t="DESC")=>{try{const s=await g("posts").order("date",t).select("title","path","categories","image","description","date").all();o.value.list=s,o.value.totalPosts=s.length}catch(s){console.error("取得文章錯誤",s)}},u=t=>{if(o.value.list.length===0)return;const e=o.value.list.filter(l=>l.categories.includes(t));e&&e.length>0&&(o.value.list=e,o.value.totalPosts=e.length)},i=(t=1,s=1)=>{const e=o.value.list;if(e.length===0)return;const l=Math.ceil(e.length/t),d=e.slice((s-1)*t,s*t);o.value={list:d,currentPage:s,totalPage:l,totalPosts:e.length}};return{updatePosts:async(t=1,s="desc")=>{a.value=!0;const e=c(s);await n(e||"DESC"),i(9,t),a.value=!1},posts:o,isLoading:a,updatePostsInCategory:async(t=1,s="")=>{a.value=!0,await n(),u(s),i(9,t),a.value=!1}}};export{C as u};
